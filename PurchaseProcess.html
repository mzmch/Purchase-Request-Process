function printDetails() {
    const rowData = selectedRowData;
    if (!rowData || !headers.length) return;

    const printWindow = window.open('', '_blank');

    if (!printWindow) {
        alert("Popup blocked! Please allow popups for this site.");
        return;
    }

    let html = `
        <html>
        <head>
            <title>Print Details</title>
            <style>
                body {
                    font-family: Arial, sans-serif;
                    padding: 20px;
                }
                h2 {
                    color: #2e7d32;
                }
                table {
                    width: 100%;
                    border-collapse: collapse;
                    margin-top: 20px;
                }
                th, td {
                    padding: 10px;
                    border: 1px solid #ccc;
                    text-align: left;
                }
                th {
                    background-color: #2e7d32;
                    color: white;
                }
            </style>
        </head>
        <body>
            <h2>Purchase Request Details</h2>
            <table>
                <thead>
                    <tr><th>Field</th><th>Value</th></tr>
                </thead>
                <tbody>`;

    rowData.forEach((value, index) => {
        html += `<tr>
                    <td>${headers[index] || "Field " + (index + 1)}</td>
                    <td>${value}</td>
                 </tr>`;
    });

    html += `
                </tbody>
            </table>
        </body>
        </html>
    `;

    printWindow.document.open();
    printWindow.document.write(html);
    printWindow.document.close();

    // Wait for the content to load before printing
    printWindow.onload = function () {
        printWindow.focus();
        printWindow.print();
        printWindow.close();
    };
}
